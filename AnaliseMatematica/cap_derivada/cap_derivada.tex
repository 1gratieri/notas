%Este trabalho está licenciado sob a Licença Atribuição-CompartilhaIgual 4.0 Internacional Creative Commons. Para visualizar uma cópia desta licença, visite http://creativecommons.org/licenses/by-sa/4.0/ ou mande uma carta para Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\chapter{Diferenciação}\label{cap:diferenciação}\index{diferenciação}
\thispagestyle{fancy}

\section{Derivada}\index{derivada}

\begin{defn}\normalfont{(Derivada)}
  Dizemos que uma função $f:D\to\mathbb{R}$, $y=f(x)$, é \emph{derivável}\index{derivável} (ou \emph{diferenciável}\index{diferenciável}) no ponto $x=x_0\in D$, se existe o limite da \emph{razão fundamental}
  \begin{equation}
    \frac{f(x) - f(x_0)}{x-x_0}
  \end{equation}
quando $x\to x_0$. Neste caso, o valor do limite é chamado de derivada da função $f$ no ponto $x_0$ e denotado por $f'(x_0)$, $Df(x_0)$ ou $\displaystyle\frac{df}{dx}(x_0)$.
\end{defn}

\begin{ex}
  Para $f(x) = \sqrt{x}$ temos $f'(2) = 1/(2\sqrt{2})$. De fato,
  \begin{equation}
      \lim_{x\to 2} \frac{\sqrt{x} - \sqrt{2}}{x-2} = \lim_{x\to 2}\frac{x-2}{(x-2)(\sqrt{x}+\sqrt{2})} = \frac{1}{2\sqrt{2}}.\\
  \end{equation}
\end{ex}

\begin{obs}
  Observemos que
  \begin{equation}
    f'(x_0) = \lim_{x\to x_0} \frac{f(x)-f(x_0)}{x-x_0} = \lim_{h\to 0} \frac{f(x_0+h) - f(x_0)}{h}
  \end{equation}
usando a mudança de variável $x=x_0+h$.
\end{obs}

\begin{defn}\normalfont{(Função derivada)}\label{defn:função_derivada}
  Dizemos que $f:D\to\mathbb{R}$ é uma \emph{função derivável}\index{função derivável} em todo o seu domínio (ou em toda parte) quando $f$ é derivável em todos os pontos de seu domínio. Neste caso, definição a função derivada de $f$ por $f':D\to\mathbb{R}$, $y=f'(x)$, com
  \begin{equation}
    f'(x) = \lim_{h\to 0} \frac{f(x_0+h) - f(x_0)}{h}.
  \end{equation}
\end{defn}

\begin{obs}
  A \emph{derivada lateral}\index{derivada!lateral} à direita ou à esquerda são definidas a partir da noção de limite lateral por
  \begin{equation}
    D_+f(x_0) = \lim_{h\to 0^+} \frac{f(x_0+h) - f(x_0)}{h}
  \end{equation}
  e
  \begin{equation}
    D_-f(x_0) = \lim_{h\to 0^-} \frac{f(x_0+h) - f(x_0)}{h},
  \end{equation}
  respectivamente. Além disso, é imediato que $Df(x_0)$ existe se, e somente se, existem e são iguais as derivadas laterais $D_+f(x_0)$ e $D_-f(x_0)$.
\end{obs}

\begin{teo}
  Toda função derivável num ponto $x_0$ é contínua nesse ponto.
\end{teo}
\begin{dem}
  Seja $f:D\to\mathbb{R}$, $y=f(x)$, uma função derivável no ponto $x_0\in D$. Vamos mostrar que $f(x)-f(x_0)\to 0$ quando $x\to x_0$. De fato, para $x\neq x_0$ temos
  \begin{equation}
    f(x) - f(x_0) = \frac{f(x) - f(x_0)}{x-x_0}(x-x_0).
  \end{equation}
Agora, 
\begin{equation}
  \lim_{x\to x_0} \frac{f(x) - f(x_0)}{x-x_0} = f'(x_0)\in\mathbb{R}\quad\text{e}\quad\lim_{x\to x_0} x-x_0 = 0,
\end{equation}
logo $f(x)-f(x_0)\to 0$ quando $x\to x_0$.
\end{dem}

\begin{defn}\normalfont{(Diferencial)}
  A diferencial de uma função derivável $f$ no ponto $x_0$ é o produto $dy := f'(x_0)\Delta x$, onde $\Delta x = x-x_0$.
\end{defn}

\begin{obs}
  De sorte que o diferencial da função identidade $y = x$ é $dx = \Delta x$ e, portanto, o diferencial de uma dada função $y = f(x)$ é $dy = f'(x_0)dx$ e, também $f'(x_0) = dy/dx$.
\end{obs}

\subsection*{Exercícios}

\begin{exer}
  Dê um exemplo de uma função contínua num ponto $x_0$ e não derivável neste mesmo ponto. Justifique sua resposta.
\end{exer}

\begin{exer}
  Mostre, a partir da definição da derivada de uma função (Definição~\ref{defn:função_derivada}) que
  \begin{enumerate}
  \item $(x^n)' = nx^{n-1}$, $n\in\mathbb{N}$.
  \item $(1/x)' = -1/x^2$.
  \item $(\sqrt{x})' = 1/(2\sqrt{x})$.
  \end{enumerate}
\end{exer}

\section{Regras operacionais}

\begin{teo}\normalfont{Regras operacionais}
  Se $f:D\to\mathbb{R}$ e $g:D\to\mathbb{R}$ são funções diferenciáveis no ponto $x\in D$, então também são deriváveis no mesmo ponto as funções $f+g$, $kf$, $fg$ e, no caso de $g(x)\neq 0$, $f/g$. Aĺém disso, temos:
  \begin{equation}
    \begin{split}
      &(f+g)'(x) = f'(x) + g'(x),\\
      &(kf)'(x) = kf'(x),\\
      &(fg)'(x) = f'(x)g(x) + f(x)g'(x),\\
      &(f/g)'(x) = \frac{f'(x)g(x) - f(x)g'(x)}{g^2(x)},\quad\text{se }g(x)\neq 0.
    \end{split}
  \end{equation}
\end{teo}
\begin{dem}
  Deixaremos como exercício a demonstração para as funções $f+g$ e $kf$ (veja, Exercício~\ref{exer:derivada_da_soma_e_da_mult_por_escalar}). Para o caso de $fg$, basta observar que:
  \begin{equation}
    \begin{split}
      \lim_{h\to 0} &\frac{(fg)(x+h)-(fg)(x)}{h} = \lim_{h\to 0} \frac{f(x+h)g(x+h)-f(x)g(x)}{h}\\
      &= \lim_{h\to 0} \frac{f(x+h)g(x+h) - f(x)g(x+h) + f(x)g(x+h) -f(x)g(x)}{h}\\
      &= \lim_{h\to 0} \frac{f(x+h) - f(x)}{h}g(x+h) + \lim_{h\to 0} f(x) \frac{g(x+h) - g(x)}{h}\\
      &= f'(x)g(x) + f(x)g'(x).
    \end{split}
  \end{equation}
Agora, para mostrar que $f/g$ é diferenciável no ponto $x\in D$ basta mostrar para o caso de $f\equiv 1$. De fato,
\begin{equation}
  \begin{split}
    \lim_{h\to 0} \frac{1}{h}\left(\frac{1}{g(x+h)}-\frac{1}{g(x)}\right) &= \lim_{h\to 0} -\frac{g(x+h)-g(x)}{h}\frac{1}{g(x+h)g(x)}\\
    &= -\frac{g'(x)}{g^2(x)}.
  \end{split}
\end{equation}
\end{dem}

\begin{teo}\normalfont{(Regra da cadeia)}
  Sejam $g:D_g\to\mathbb{R}$ derivável no ponto $x\in D_g$, $f:D_f\to\mathbb{R}$ com $g(D_g)\subset D_f$ e derivável no ponto $y=g(x)$. Nestas condições, a função composta $f\circ g$ é diferenciável no ponto $x$ e $(f\circ g)'(x) = f'(g(x))g'(x)$.
\end{teo}
\begin{dem}
  Como $f$ é derivável em $y=g(x)$, temos
  \begin{equation}
    \frac{f(y+k) - f(y)}{k} = f'(y) + \eta(k),
  \end{equation}
com $\eta(k)\to 0$ quando $k\to 0$. Rearranjando temos
\begin{equation}
  f(y+k)-f(y) = k[f'(y) + \eta(k)]
\end{equation}
inclusive para $k=0$. Agora, para todo $h$ suficientemente pequeno, pomos $k = g(x+h) - g(x)$ e, então
\begin{equation}
  \begin{split}
    \frac{f(g(x+h))-f(g(x))}{h} &= \frac{f(y+k)-f(y)}{h}\\
    &= \frac{[f'(y)+\eta(k)]k}{h}\\
    &= [f'(y) + eta(k)]\frac{g(x+h)-g(x)}{h}\\
    &\to f'(g(x))g'(x),\quad\text{com }h\to 0.
  \end{split}
\end{equation}
\end{dem}

\begin{teo}\normalfont{(Derivada da função inversa)}
  Seja $f:I=(a, b)\to\mathbb{R}$, $y=f(x)$, uma função derivável em $I$ com $f'(x)$ sempre positiva ou sempre negativa. Então, sua inversa $x=f^{-1}(y)$ é derivável no intervalo $J = f(I)$ e $(f^{-1})'(y) = 1/f'(g(x))$.
\end{teo}
\begin{dem}
  Sejam $y,y_0\in J$, $x=g(y)$ e $x_0=g(y_0)$. Notemos que
  \begin{equation}
    \frac{g(y)-g(y_0)}{y-y_0} = \frac{x-x_0}{f(x)-f(x_0)} = \left[\frac{f(x)-f(x_0)}{x-x_0}\right]^{-1}.
  \end{equation}
Agora, basta observar que quando $y\to y_0$, temos $x\to x_0$ pela continuidade da $g$. Logo, tomando o limite nas expressões acima, temos o resultado desejado.
\end{dem}

\subsection*{Exercícios}

\begin{exer}\label{exer:derivada_da_soma_e_da_mult_por_escalar}
  Mostre que se $f,g:D\to\mathbb{R}$ são funções diferenciáveis num ponto $x\in D$, então também são as funções $f+g$ e $kf$, sendo:
  \begin{equation}
    (f+g)'(x) = f'(x) + g'(x)\quad\text{e}\quad (kf)'(x) = kf'(x).
  \end{equation}
\end{exer}
\begin{resp}
  Segue da definição de derivada.
\end{resp}

\begin{exer}
  Mostre que se $f:I=(a,b)\to\mathbb{R}$ é derivável em $I$ e $f'(x) > 0$ para todo $x\in I$, então $f$ é uma função crescente.
\end{exer}
\begin{resp}
  Observe que se $f'(x)>0$ para algum $x\in I$, então existe uma vizinhança de $x$ na qual $f$ é crescente.
\end{resp}